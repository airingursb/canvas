# Ch18 æ–‡æœ¬å¯¹é½ä¸åº¦é‡

## æ–‡æœ¬å¯¹é½

### æ°´å¹³å¯¹é½`textAlign`

`context.textAlign="center|end|left|right|start";`

å…¶ä¸­å„å€¼åŠæ„ä¹‰å¦‚ä¸‹è¡¨ã€‚

|å€¼|æè¿°|
|:--:|:--:|
|start|é»˜è®¤ã€‚æ–‡æœ¬åœ¨æŒ‡å®šçš„ä½ç½®å¼€å§‹ã€‚|
|end|æ–‡æœ¬åœ¨æŒ‡å®šçš„ä½ç½®ç»“æŸã€‚|
|center|æ–‡æœ¬çš„ä¸­å¿ƒè¢«æ”¾ç½®åœ¨æŒ‡å®šçš„ä½ç½®ã€‚|
|left|æ–‡æœ¬å·¦å¯¹é½ã€‚|
|right|æ–‡æœ¬å³å¯¹é½ã€‚|

æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç›´è§‚çš„æ„Ÿå—ä¸€ä¸‹ã€‚

```HTML
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>textAlign</title>
    <style>
        body { background: url("./images/bg3.jpg") repeat; }
        #canvas { border: 1px solid #aaaaaa; display: block; margin: 50px auto; }
    </style>
</head>
<body>
<div id="canvas-warp">
    <canvas id="canvas">
        ä½ çš„æµè§ˆå™¨å±…ç„¶ä¸æ”¯æŒCanvasï¼Ÿï¼èµ¶å¿«æ¢ä¸€ä¸ªå§ï¼ï¼
    </canvas>
</div>

<script>
    window.onload = function(){
        var canvas = document.getElementById("canvas");
        canvas.width = 800;
        canvas.height = 600;
        var context = canvas.getContext("2d");
        context.fillStyle = "#FFF";
        context.fillRect(0,0,800,600);

        // åœ¨ä½ç½® 400 åˆ›å»ºè“çº¿
        context.strokeStyle="blue";
        context.moveTo(400,100);
        context.lineTo(400,500);
        context.stroke();


        context.fillStyle = "#000";
        context.font="50px Arial";

        // æ˜¾ç¤ºä¸åŒçš„ textAlign å€¼
        context.textAlign="start";
        context.fillText("textAlign=start", 400, 120);
        context.textAlign="end";
        context.fillText("textAlign=end", 400, 200);
        context.textAlign="left";
        context.fillText("textAlign=left", 400, 280);
        context.textAlign="center";
        context.fillText("textAlign=center", 400, 360);
        context.textAlign="right";
        context.fillText("textAlign=right", 400, 480);
    };
</script>
</body>
</html>
```

[æ¼”ç¤º 18-1](http://airingursb.github.io/canvas/Canvas/18/18-1.html)

è¿è¡Œç»“æœï¼š

![textAlign](http://airing.ursb.me/edu18-1.png-html.jpg)

### å‚ç›´å¯¹é½`textBaseline`

`context.textBaseline="alphabetic|top|hanging|middle|ideographic|bottom";`

å…¶ä¸­å„å€¼åŠæ„ä¹‰å¦‚ä¸‹è¡¨ã€‚

|å€¼|æè¿°|
|:--:|:--:|
|alphabetic|é»˜è®¤ã€‚æ–‡æœ¬åŸºçº¿æ˜¯æ™®é€šçš„å­—æ¯åŸºçº¿ã€‚|
|top|æ–‡æœ¬åŸºçº¿æ˜¯ em æ–¹æ¡†çš„é¡¶ç«¯ã€‚|
|hanging|æ–‡æœ¬åŸºçº¿æ˜¯æ‚¬æŒ‚åŸºçº¿ã€‚|
|middle|æ–‡æœ¬åŸºçº¿æ˜¯ em æ–¹æ¡†çš„æ­£ä¸­ã€‚|
|ideographic|æ–‡æœ¬åŸºçº¿æ˜¯è¡¨æ„åŸºçº¿ã€‚|
|bottom|æ–‡æœ¬åŸºçº¿æ˜¯ em æ–¹æ¡†çš„åº•ç«¯ã€‚|

é¦–å…ˆå’±ä»¬é€šè¿‡ä¸€ä¸ªå›¾æ¥çœ‹ä¸€ä¸‹å„ä¸ªåŸºçº¿ä»£è¡¨çš„ä½ç½®ã€‚
![åŸºçº¿](http://airing.ursb.me/edu18-2.gif)

æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç›´è§‚çš„æ„Ÿå—ä¸€ä¸‹ã€‚

```HTML
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>textBaseline</title>
    <style>
        body { background: url("./images/bg3.jpg") repeat; }
        #canvas { border: 1px solid #aaaaaa; display: block; margin: 50px auto; }
    </style>
</head>
<body>
<div id="canvas-warp">
    <canvas id="canvas">
        ä½ çš„æµè§ˆå™¨å±…ç„¶ä¸æ”¯æŒCanvasï¼Ÿï¼èµ¶å¿«æ¢ä¸€ä¸ªå§ï¼ï¼
    </canvas>
</div>

<script>
    window.onload = function(){
        var canvas = document.getElementById("canvas");
        canvas.width = 800;
        canvas.height = 600;
        var context = canvas.getContext("2d");
        context.fillStyle = "#FFF";
        context.fillRect(0,0,800,600);

        //åœ¨ä½ç½® y=300 ç»˜åˆ¶è“è‰²çº¿æ¡
        context.strokeStyle="blue";
        context.moveTo(0,300);
        context.lineTo(800,300);
        context.stroke();

        context.fillStyle = "#00AAAA";
        context.font="20px Arial";

        //åœ¨ y=300 ä»¥ä¸åŒçš„ textBaseline å€¼æ”¾ç½®æ¯ä¸ªå•è¯
        context.textBaseline="top";
        context.fillText("Top",150,300);
        context.textBaseline="bottom";
        context.fillText("Bottom",250,300);
        context.textBaseline="middle";
        context.fillText("Middle",350,300);
        context.textBaseline="alphabetic";
        context.fillText("Alphabetic",450,300);
        context.textBaseline="hanging";
        context.fillText("Hanging",550,300);
    };
</script>
</body>
</html>
```

[æ¼”ç¤º 18-2](http://airingursb.github.io/canvas/Canvas/18/18-2.html)

è¿è¡Œç»“æœï¼š

![textBaseline](http://airing.ursb.me/edu18-3.png-html.jpg)

## æ–‡æœ¬åº¦é‡

æ–‡æœ¬åº¦é‡ä½¿ç”¨`measureText()`æ–¹æ³•å®ç°ï¼Œè¿™ä¸ªapiåœ¨æ¢è¡Œæ˜¾ç¤ºåˆ¤æ–­ä¸­ä¼šæœ‰å¥‡æ•ˆã€‚ä¾‹å¦‚ä¹‹å‰æåˆ°çš„å¾®ä¿¡ç•Œé¢ç”Ÿæˆå™¨ï¼Œåœ¨å¯¹è¯çš„å­—ç¬¦é•¿åº¦è¶…å‡ºä¸€å®šå€¼çš„æ—¶å€™ï¼Œéœ€è¦æ¢è¡Œæ˜¾ç¤ºã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªåŠŸèƒ½éœ€è¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿå°±æ˜¯é€šè¿‡`context.measureText(text).width;`æ¥å®ç°åˆ¤æ–­ã€‚å…¶ä¸­ï¼Œtextæ˜¯è¦æµ‹é‡çš„æ–‡æœ¬ã€‚

è¿™é‡Œæä¾›ä¸€ä¸ªä»£ç æ¼”ç¤ºä¸€ä¸‹è¯¥æ–¹æ³•çš„ä½œç”¨ï¼Œå¤§å®¶å¯ä»¥è¯¾ä¸‹è‡ªè¡Œå®ç°æ–‡æœ¬æ¢è¡ŒåŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯æ¯”è¾ƒå®ç”¨çš„ï¼Œå› ä¸ºCanvas æ–‡æœ¬APIåªæ”¯æŒå•è¡Œæ˜¾ç¤ºã€‚

```HTML
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>measureText</title>
    <style>
        body { background: url("./images/bg3.jpg") repeat; }
        #canvas { border: 1px solid #aaaaaa; display: block; margin: 50px auto; }
    </style>
</head>
<body>
<div id="canvas-warp">
    <canvas id="canvas">
        ä½ çš„æµè§ˆå™¨å±…ç„¶ä¸æ”¯æŒCanvasï¼Ÿï¼èµ¶å¿«æ¢ä¸€ä¸ªå§ï¼ï¼
    </canvas>
</div>

<script>
    window.onload = function(){
        var canvas = document.getElementById("canvas");
        canvas.width = 800;
        canvas.height = 600;
        var context = canvas.getContext("2d");
        context.fillStyle = "#FFF";
        context.fillRect(0,0,800,600);

        //å±…ä¸­æ˜¾ç¤º
        context.textAlign = "center";
        context.textBaseline = "middle";

        context.fillStyle = "#00AAAA";
        context.font="30px Arial";
        var txt="Hello Canvas";
        context.fillText("width:" + context.measureText(txt).width,400,300);
        context.fillText(txt,400,250);

    };
</script>
</body>
</html>
```

[æ¼”ç¤º 18-3](http://airingursb.github.io/canvas/Canvas/18/18-3.html)

è¿è¡Œç»“æœï¼š

![measureText](http://airing.ursb.me/edu18-4.png-html.jpg)

***
è‡³æ­¤ï¼ŒCanvas æ–‡æœ¬APIçš„å†…å®¹å·²ç»è¯´å®Œäº†ï¼Œæ˜¯ä¸æ˜¯éå¸¸çš„ç®€å•ã€‚ç°åœ¨å’±ä»¬å·²ç»æœ‰äº†ä¹¦æ³•å®¶å’Œè‰ºæœ¯å®¶çš„åº•è•´äº†ï¼Œæ¥ä¸‹æ¥ï¼Œå’±ä»¬å­¦ä¸€äº›Canvas é«˜çº§å†…å®¹API~æ˜¯ä¸æ˜¯ç‰¹åˆ«çš„æ¿€åŠ¨~æˆ‘ä»¬ç»§ç»­å‰è¿›ï¼ğŸ˜‹


