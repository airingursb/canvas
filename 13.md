# Ch13 å¹³ç§»å˜æ¢

## å›¾å½¢å˜æ¢

ä»ä»Šå¤©å¼€å§‹ï¼Œæˆ‘ä»¬å°±å¼€å§‹è°ˆä¸€è°ˆå›¾å½¢å˜æ¢ã€‚å›¾å½¢å˜æ¢æ˜¯æŒ‡ç”¨æ•°å­¦æ–¹æ³•è°ƒæ•´æ‰€ç»˜å½¢çŠ¶çš„ç‰©ç†å±æ€§ï¼Œå…¶å®è´¨æ˜¯åæ ‡å˜å½¢ã€‚æ‰€æœ‰çš„å˜æ¢éƒ½ä¾èµ–äºåå°çš„æ•°å­¦çŸ©é˜µè¿ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦ä½¿ç”¨å˜æ¢çš„åŠŸèƒ½å³å¯ï¼Œæ— éœ€å»ç†è§£è¿™äº›è¿ç®—ã€‚è°ˆåˆ°å›¾å½¢å˜æ¢ï¼Œä¸å¾—ä¸å¾—è¯´çš„ä¸‰ä¸ªåŸºæœ¬å˜æ¢æ–¹æ³•å°±æ˜¯ï¼š

1. å¹³ç§»å˜æ¢ï¼š`translate(x,y)`
2. æ—‹è½¬å˜æ¢ï¼š`rotate(deg)`
3. ç¼©æ”¾å˜æ¢ï¼š`scale(sx,sy)`

å…¶å®åæ ‡å˜å½¢çš„æœ¬è´¨æ˜¯å˜æ¢çŸ©é˜µï¼Œæ‰€ä»¥åœ¨æœ€åæˆ‘ä»¬ä¼šè°ˆä¸€è°ˆä¸€ä¸ªä¸‡èƒ½çš„å˜æ¢æ–¹æ³•â€”â€”çŸ©é˜µå˜æ¢`transform()`ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æŒ‰éƒ¨å°±ç­ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬æ¥è°ˆä¸€è°ˆå¹³ç§»å˜æ¢ã€‚

## å¹³ç§»å˜æ¢`translate()`

å¹³ç§»å˜æ¢ï¼Œæ•…åæ€è®®ï¼Œå°±æ˜¯ä¸€èˆ¬çš„å›¾å½¢ä½ç§»ã€‚æ¯”å¦‚è¿™é‡Œæˆ‘æƒ³å°†ä½äºï¼ˆ100ï¼Œ100ï¼‰çš„çŸ©å½¢å¹³ç§»è‡³ï¼ˆ200ï¼Œ200ï¼‰ç‚¹ã€‚é‚£ä¹ˆæˆ‘åªè¦åœ¨ç»˜åˆ¶çŸ©å½¢ä¹‹å‰åŠ ä¸Š`context.translate(100,100)`å³å¯ã€‚

è¿™é‡Œçš„`translate()`åªä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œå…¶å®å°±æ˜¯æ–°ç”»å¸ƒåæ ‡ç³»åŸç‚¹çš„åæ ‡ã€‚ä¸‹é¢ç»“åˆä»£ç æ¥çœ‹çœ‹æ•ˆæœã€‚

```HTML
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>å¹³ç§»å˜æ¢</title>
    <style>
        body { background: url("./images/bg3.jpg") repeat; }
        #canvas { border: 1px solid #aaaaaa; display: block; margin: 50px auto; }
    </style>
</head>
<body>
<div id="canvas-warp">
    <canvas id="canvas">
        ä½ çš„æµè§ˆå™¨å±…ç„¶ä¸æ”¯æŒCanvasï¼Ÿï¼èµ¶å¿«æ¢ä¸€ä¸ªå§ï¼ï¼
    </canvas>
</div>

<script>
    window.onload = function(){
        var canvas = document.getElementById("canvas");
        canvas.width = 800;
        canvas.height = 600;
        var context = canvas.getContext("2d");
        context.fillStyle = "#FFF";
        context.fillRect(0,0,800,600);

        context.fillStyle = "#00AAAA";
        context.fillRect(100,100,200,100);

        context.fillStyle = "red";
        context.translate(100,100);
        context.fillRect(100,100,200,100);

    };
</script>
</body>
</html>
```

[æ¼”ç¤º 13-1](http://airingursb.github.io/canvas/Canvas/13/13-1.html)

è¿è¡Œç»“æœï¼š

![å¹³ç§»å˜æ¢](http://airing.ursb.me/edu13-1.png-html.jpg)

è¿™é‡Œçš„è“è‰²çŸ©å½¢ï¼Œæ˜¯çŸ©å½¢åŸæ¥çš„ä½ç½®ï¼Œç„¶åè°ƒç”¨`translate()`æ–¹æ³•ï¼Œå°†çŸ©å½¢ä½ç§»è‡³ï¼ˆ200ï¼Œ200ï¼‰ï¼Œå³çº¢è‰²çŸ©å½¢çš„ä½ç½®ã€‚æˆ‘ä»¬æ¥ç”¨ä¸€å¼ å›¾çœ‹çœ‹ï¼Œå®ƒæ˜¯æ€ä¹ˆåšåˆ°å¹³ç§»å˜æ¢çš„ã€‚

![è§£æå¹³ç§»å˜æ¢](http://airing.ursb.me/edu13-2.jpeg-html.jpg)

æ²¡é”™ï¼Œå…¶å®è¿™é‡Œçš„å¹³ç§»å˜æ¢å®è´¨å°±æ˜¯åœ¨å¹³ç§»åæ ‡ç³»ï¼Œè€Œå¯¹`translate()`ä¼ å…¥çš„å‚æ•°ï¼Œå®è´¨å°±æ˜¯æ–°åæ ‡ç³»ç›¸å¯¹äºæ—§åæ ‡ç³»çš„åŸç‚¹ã€‚è¿™ä½¿å¾—æˆ‘ä»¬ä¾æ—§æ˜¯åœ¨ï¼ˆ100ï¼Œ100ï¼‰ç»˜åˆ¶çš„çº¢è‰²çŸ©å½¢ï¼Œåœ¨å¹³ç§»åæ ‡ç³»ä¹‹åï¼Œå˜åˆ°äº†ï¼ˆ200ï¼Œ200ï¼‰å¤„ã€‚

### æ³¨æ„ä½¿ç”¨çŠ¶æ€ä¿å­˜

å…¶å®è¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼Œæˆ‘ä»¬å¦‚æœæƒ³æŠŠçŸ©å½¢å¹³ç§»è‡³ï¼ˆ300ï¼Œ300ï¼‰æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ–è®¸æˆ‘ä»¬ä¼šæƒ³ï¼Œç›´æ¥è°ƒç”¨`context.translate(200,200)`å°±å¯ä»¥äº†ã€‚å¥½ï¼Œæˆ‘ä»¬çœ‹çœ‹æ•ˆæœã€‚

```HTML
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>å¹³ç§»å˜æ¢</title>
    <style>
        body { background: url("./images/bg3.jpg") repeat; }
        #canvas { border: 1px solid #aaaaaa; display: block; margin: 50px auto; }
    </style>
</head>
<body>
<div id="canvas-warp">
    <canvas id="canvas">
        ä½ çš„æµè§ˆå™¨å±…ç„¶ä¸æ”¯æŒCanvasï¼Ÿï¼èµ¶å¿«æ¢ä¸€ä¸ªå§ï¼ï¼
    </canvas>
</div>

<script>
    window.onload = function(){
        var canvas = document.getElementById("canvas");
        canvas.width = 800;
        canvas.height = 600;
        var context = canvas.getContext("2d");
        context.fillStyle = "#FFF";
        context.fillRect(0,0,800,600);

        context.fillStyle = "#00AAAA";
        context.fillRect(100,100,200,100);

        context.fillStyle = "red";
        context.translate(100,100);
        context.fillRect(100,100,200,100);

        context.fillStyle = "green";
        context.translate(200,200);
        context.fillRect(100,100,200,100);

    };
</script>
</body>
</html>
```

[æ¼”ç¤º 13-2](http://airingursb.github.io/canvas/Canvas/13/13-2.html)

è¿è¡Œç»“æœï¼š

![å›¾å½¢å˜æ¢çš„å‘](http://airing.ursb.me/edu13-3.png-html.jpg)

è¿™é‡Œçš„ç»¿è‰²çŸ©å½¢å¹¶æ²¡æœ‰å¦‚æˆ‘ä»¬æ‰€æ„¿åœ¨ï¼ˆ300ï¼Œ300ï¼‰ä½ç½®å¤„ï¼Œè€Œæ˜¯è·‘åˆ°äº†ï¼ˆ400ï¼Œ400ï¼‰è¿™é‡Œã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæƒ³å¿…å¤§å®¶å·²ç»çŸ¥é“äº†ç­”æ¡ˆâ€”â€”Canvasæ˜¯åŸºäºçŠ¶æ€çš„ç»˜åˆ¶ã€‚åœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡å¹³ç§»ä¹‹åï¼Œåæ ‡ç³»å·²ç»åœ¨ï¼ˆ100ï¼Œ100ï¼‰å¤„äº†ï¼Œæ‰€ä»¥å¦‚æœç»§ç»­å¹³ç§»ï¼Œè¿™ä¸ªå†åŸºäºæ–°åæ ‡ç³»ç»§ç»­å¹³ç§»åæ ‡ç³»ã€‚é‚£ä¹ˆè¦æ€ä¹ˆå»è§£å†³å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ã€‚

ç¬¬ä¸€ï¼Œåœ¨æ¯æ¬¡ä½¿ç”¨å®Œå˜æ¢ä¹‹åï¼Œè®°å¾—å°†åæ ‡ç³»å¹³ç§»å›åŸç‚¹ï¼Œå³è°ƒç”¨`translate(-x,-y)`ã€‚

ç¬¬äºŒï¼Œåœ¨æ¯æ¬¡å¹³ç§»ä¹‹å‰ä½¿ç”¨`context.save()`ï¼Œåœ¨æ¯æ¬¡ç»˜åˆ¶ä¹‹åï¼Œä½¿ç”¨`context.restore()`ã€‚

åˆ‡è®°ï¼Œ**åƒä¸‡ä¸è¦å†æƒ³ç€æˆ‘ç»§ç»­ç´§æ¥ç€ç¬¬ä¸€æ¬¡å¹³ç§»ä¹‹åå†å¹³ç§»**`translate(100,100)`ä¸å°±è¡Œäº†ï¼Œè¿™æ ·ä½ è‡ªå·±çš„åæ ‡ç³»å°±ä¼šä¹±å¥—ï¼Œæ ¹æœ¬æ‰¾ä¸åˆ°è‡ªå·±çš„åæ ‡ç³»åŸç‚¹åœ¨å“ªï¼Œåœ¨å¤šæ¬¡å˜æ¢æˆ–è€…å°è£…å‡½æ•°ä¹‹åï¼Œä¼šå‘æ­»ä½ ã€‚æ‰€ä»¥**ä¸€å®šè¦ä»¥æœ€åˆçŠ¶æ€ä¸ºæœ€æ ¹æœ¬çš„å‚ç…§ç‰©**ï¼Œè¿™æ˜¯åŸåˆ™æ€§é—®é¢˜ã€‚è¿™é‡Œæˆ‘å»ºè®®ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œè€Œä¸”**åœ¨æ¶‰åŠæ‰€æœ‰å›¾å½¢å˜æ¢çš„æ—¶å€™ï¼Œéƒ½è¦è¿™ä¹ˆå¤„ç†ï¼Œä¸ä»…ä»…æ˜¯å¹³ç§»å˜æ¢**ã€‚



å…·ä½“ä½¿ç”¨å¦‚ä¸‹ã€‚

```HTML
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>å¹³ç§»å˜æ¢</title>
    <style>
        body { background: url("./images/bg3.jpg") repeat; }
        #canvas { border: 1px solid #aaaaaa; display: block; margin: 50px auto; }
    </style>
</head>
<body>
<div id="canvas-warp">
    <canvas id="canvas">
        ä½ çš„æµè§ˆå™¨å±…ç„¶ä¸æ”¯æŒCanvasï¼Ÿï¼èµ¶å¿«æ¢ä¸€ä¸ªå§ï¼ï¼
    </canvas>
</div>

<script>
    window.onload = function(){
        var canvas = document.getElementById("canvas");
        canvas.width = 800;
        canvas.height = 600;
        var context = canvas.getContext("2d");
        context.fillStyle = "#FFF";
        context.fillRect(0,0,800,600);

        context.fillStyle = "#00AAAA";
        context.fillRect(100,100,200,100);

        context.save();
        context.fillStyle = "red";
        context.translate(100,100);
        context.fillRect(100,100,200,100);
        context.restore();

        context.save();
        context.fillStyle = "green";
        context.translate(200,200);
        context.fillRect(100,100,200,100);
        context.restore();

    };
</script>
</body>
</html>
```

[æ¼”ç¤º 13-3](http://airingursb.github.io/canvas/Canvas/13/13-3.html)

è¿è¡Œç»“æœï¼š

![çŠ¶æ€ä¿å­˜ç»“åˆå›¾å½¢å˜æ¢](http://airing.ursb.me/edu13-4.png-html.jpg)

å› æ­¤ï¼Œ**åœ¨ä½¿ç”¨å›¾å½¢å˜æ¢çš„æ—¶å€™ï¼Œè¦è®°å¾—ç»“åˆä½¿ç”¨çŠ¶æ€ä¿å­˜**ã€‚

å¥½äº†ï¼Œè¿™ä¸€èŠ‚çš„å†…å®¹å¾ˆå°‘ï¼Œæˆ‘ä»¬ç»§ç»­å‰è¿›ã€‚ğŸ˜‹

